# Smart POS API Documentation

р╣Ар╕нр╕Бр╕кр╕▓р╕гр╕Щр╕╡р╣Йр╕гр╕░р╕Ър╕╕р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕Вр╕нр╕З API Endpoints р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╣Гр╕Щр╕гр╕░р╕Ър╕Ъ **Smart Point of Sale (NestJS Backend)**

## р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕Ър╕╖р╣Йр╕нр╕Зр╕Хр╣Йр╕Щ (General Info)
- **Base URL**: `http://localhost:3000` (р╕лр╕гр╕╖р╕нр╕Хр╕▓р╕бр╕кр╕ар╕▓р╕Юр╣Бр╕зр╕Фр╕ер╣Йр╕нр╕бр╕Чр╕╡р╣Ир╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З)
- **Authentication**: р╣Гр╕Кр╣Й **JWT (JSON Web Token)**
    - р╕кр╣Ир╕Зр╕Ьр╣Ир╕▓р╕Щ Header: `Authorization: Bearer <your_token>`
    - р╕лр╕гр╕╖р╕нр╕Ьр╣Ир╕▓р╕Щ Cookie: `access_token=<your_token>`

---

## 1. Authentication (`/auth`)
р╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕Бр╕▓р╕гр╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ър╣Бр╕ер╕░р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕Хр╕▒р╕зр╕Хр╕Щ
- `POST /auth/login`: р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ър╕кр╕│р╕лр╕гр╕▒р╕Ър╕Юр╕Щр╕▒р╕Бр╕Зр╕▓р╕Щ/р╕Ьр╕╣р╣Йр╕Ър╕гр╕┤р╕лр╕▓р╕г
- `POST /auth/register`: р╕ер╕Зр╕Чр╕░р╣Ар╕Ър╕╡р╕вр╕Щр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╣Гр╕лр╕бр╣И (Dev only)

---

## 2. Staff Management (`/staff`)
*ЁЯФТ р╕кр╕┤р╕Чр╕Шр╕┤р╣Мр╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕г: Admin*
- `GET /staff`: р╕гр╕▓р╕вр╕Кр╕╖р╣Ир╕нр╕Юр╕Щр╕▒р╕Бр╕Зр╕▓р╕Щр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╕ар╕▓р╕вр╣Гр╕Хр╣Йр╕Бр╕▓р╕гр╕Фр╕╣р╣Бр╕е
- `POST /staff`: р╣Ар╕Юр╕┤р╣Ир╕бр╕Юр╕Щр╕▒р╕Бр╕Зр╕▓р╕Щр╣Гр╕лр╕бр╣И
- `PUT /staff/:id`: р╣Бр╕Бр╣Йр╣Др╕Вр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Юр╕Щр╕▒р╕Бр╕Зр╕▓р╕Щ
- `DELETE /staff/:id`: р╕ер╕Ър╕Юр╕Щр╕▒р╕Бр╕Зр╕▓р╕Щр╕нр╕нр╕Бр╕Ир╕▓р╕Бр╕гр╕░р╕Ър╕Ъ

---

## 3. Products (`/products`)
- `GET /products`: р╕гр╕▓р╕вр╕Бр╕▓р╕гр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф (р╕гр╕нр╕Зр╕гр╕▒р╕Ъ Query: `search`, `categoryId`, `page`, `limit`)
- `GET /products/:id`: р╕Фр╕╣р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕гр╕▓р╕вр╕Кр╕┤р╣Йр╕Щ
- `GET /products/barcode/:barcode`: р╕Др╣Йр╕Щр╕лр╕▓р╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Фр╣Йр╕зр╕вр╕Ър╕▓р╕гр╣Мр╣Вр╕Др╣Йр╕Ф
- `POST /products`: р╣Ар╕Юр╕┤р╣Ир╕бр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Гр╕лр╕бр╣И *ЁЯФТ (Admin)*
- `PUT /products/:id`: р╣Бр╕Бр╣Йр╣Др╕Вр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕┤р╕Щр╕Др╣Йр╕▓ *ЁЯФТ (Admin)*
- `DELETE /products/:id`: р╕ер╕Ър╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕нр╕нр╕Б *ЁЯФТ (Admin)*
- **Stock & Images**:
    - `POST /products/:id/stock`: р╣Ар╕Юр╕┤р╣Ир╕бр╕Ир╕│р╕Щр╕зр╕Щр╕кр╕Хр╣Зр╕нр╕Бр╕кр╕┤р╕Щр╕Др╣Йр╕▓ (Manual) *ЁЯФТ (Admin)*
    - `POST /products/:id/images`: р╣Ар╕Юр╕┤р╣Ир╕бр╕гр╕╣р╕Ыр╕ар╕▓р╕Юр╕кр╕┤р╕Щр╕Др╣Йр╕▓ *ЁЯФТ (Admin)*
    - `GET /products/:id/images`: р╕Фр╕╣р╕гр╕╣р╕Ыр╕ар╕▓р╕Юр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╕Вр╕нр╕Зр╕кр╕┤р╕Щр╕Др╣Йр╕▓

---

## 4. Categories (`/categories`)
- `GET /categories`: р╕гр╕▓р╕вр╕Кр╕╖р╣Ир╕нр╕лр╕бр╕зр╕Фр╕лр╕бр╕╣р╣Ир╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
- `POST /categories`: р╣Ар╕Юр╕┤р╣Ир╕бр╕лр╕бр╕зр╕Фр╕лр╕бр╕╣р╣Ир╣Гр╕лр╕бр╣И *ЁЯФТ (Admin)*
- `PUT /categories/:id`: р╣Бр╕Бр╣Йр╣Др╕Вр╕лр╕бр╕зр╕Фр╕лр╕бр╕╣р╣И *ЁЯФТ (Admin)*
- `DELETE /categories/:id`: р╕ер╕Ър╕лр╕бр╕зр╕Фр╕лр╕бр╕╣р╣И *ЁЯФТ (Admin)*

---

## 5. Sales & POS (`/sales`)
- `GET /sales`: р╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤р╕Бр╕▓р╕гр╕Вр╕▓р╕в (р╕гр╕нр╕Зр╕гр╕▒р╕Ъ Query: `status`, `customerId`, `page`, `limit`)
- `GET /sales/:id`: р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕Ър╕┤р╕ер╕Вр╕▓р╕в
- `POST /sales`: **р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Бр╕▓р╕гр╕Вр╕▓р╕вр╣Гр╕лр╕бр╣И (Checkout)**
- `PUT /sales/:id`: р╣Бр╕Бр╣Йр╣Др╕Вр╕Ър╕┤р╕ер╕Вр╕▓р╕в *ЁЯФТ (Admin)*
- `DELETE /sales/:id`: р╕вр╕Бр╣Ар╕ер╕┤р╕Бр╕Ър╕┤р╕ер╕Вр╕▓р╕в *ЁЯФТ (Admin)*
- `GET /sales/today`: р╕кр╕гр╕╕р╕Ыр╕вр╕нр╕Фр╕Вр╕▓р╕вр╕зр╕▒р╕Щр╕Щр╕╡р╣Й

---

## 6. Held Bills (р╕Юр╕▒р╕Бр╕Ър╕┤р╕е) (`/held-bills`)
- `GET /held-bills`: р╕гр╕▓р╕вр╕Бр╕▓р╕гр╕Ър╕┤р╕ер╕Чр╕╡р╣Ир╕Юр╕▒р╕Бр╣Др╕зр╣Йр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
- `POST /held-bills`: р╕кр╕гр╣Йр╕▓р╕Зр╕Бр╕▓р╕гр╕Юр╕▒р╕Бр╕Ър╕┤р╕ер╣Гр╕лр╕бр╣И
- `GET /held-bills/:id`: р╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ър╕┤р╕ер╕Чр╕╡р╣Ир╕Юр╕▒р╕Бр╣Др╕зр╣Йр╕бр╕▓р╕Чр╕│р╕Хр╣Ир╕н
- `DELETE /held-bills/:id`: р╕ер╕Ър╕Ър╕┤р╕ер╕Чр╕╡р╣Ир╕Юр╕▒р╕Бр╣Др╕зр╣Й (р╕лр╕ер╕▒р╕Зр╕Др╕┤р╕Фр╣Ар╕Зр╕┤р╕Щр╣Ар╕кр╕гр╣Зр╕И)

---

## 7. Customers (`/customers`)
- `GET /customers`: р╕гр╕▓р╕вр╕Кр╕╖р╣Ир╕нр╕кр╕бр╕▓р╕Кр╕┤р╕Бр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф (р╕гр╕нр╕Зр╕гр╕▒р╕Ъ Query: `search`)
- `GET /customers/:id`: р╕Фр╕╣р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕бр╕▓р╕Кр╕┤р╕Бр╣Бр╕ер╕░р╣Бр╕Хр╣Йр╕бр╕кр╕░р╕кр╕б
- `POST /customers`: р╕ер╕Зр╕Чр╕░р╣Ар╕Ър╕╡р╕вр╕Щр╕кр╕бр╕▓р╕Кр╕┤р╕Бр╣Гр╕лр╕бр╣И
- `PUT /customers/:id`: р╣Бр╕Бр╣Йр╣Др╕Вр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕бр╕▓р╕Кр╕┤р╕Б
- `POST /customers/login`: р╕ер╕╣р╕Бр╕Др╣Йр╕▓р╕ер╣Зр╕нр╕Бр╕нр╕┤р╕Щр╣Ар╕Вр╣Йр╕▓р╕гр╕░р╕Ър╕Ър╕кр╕бр╕▓р╕Кр╕┤р╕Б (Phone + Birthday)

---

## 8. Coupons & Promotions (`/coupons`, `/promotions`)
- `GET /coupons`: р╕гр╕▓р╕вр╕Бр╕▓р╕гр╕Др╕╣р╕Ыр╕нр╕Зр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
- `POST /coupons/validate`: р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Др╕зр╕▓р╕бр╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕Зр╕Вр╕нр╕Зр╕Др╕╣р╕Ыр╕нр╕З (р╕Бр╣Ир╕нр╕Щр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ)
- `POST /promotions`: р╕кр╕гр╣Йр╕▓р╕Зр╣Вр╕Ыр╕гр╣Вр╕бр╕Кр╕▒р╣Ир╕Щр╣Гр╕лр╕бр╣И *ЁЯФТ (Admin)*
- `GET /promotions/active`: р╕гр╕▓р╕вр╕Бр╕▓р╕гр╣Вр╕Ыр╕гр╣Вр╕бр╕Кр╕▒р╣Ир╕Щр╕Чр╕╡р╣Ир╕Бр╕│р╕ер╕▒р╕Зр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╕нр╕вр╕╣р╣И

---

## 9. Rewards (`/rewards`)
- `GET /rewards`: р╕гр╕▓р╕вр╕Бр╕▓р╕гр╕Вр╕нр╕Зр╕гр╕▓р╕Зр╕зр╕▒р╕ер╕кр╕│р╕лр╕гр╕▒р╕Ър╣Бр╕ер╕Бр╣Бр╕Хр╣Йр╕б
- `POST /rewards/redeem`: р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Бр╕▓р╕гр╣Бр╕ер╕Бр╕Вр╕нр╕Зр╕гр╕▓р╕Зр╕зр╕▒р╕ер╕кр╕бр╕▓р╕Кр╕┤р╕Б
- `GET /rewards/redemptions/:customerId`: р╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤р╕Бр╕▓р╕гр╣Бр╕ер╕Бр╕гр╕▓р╕Зр╕зр╕▒р╕ер╕Вр╕нр╕Зр╕ер╕╣р╕Бр╕Др╣Йр╕▓

---

## 10. Dashboard Stats (`/stats`)
*ЁЯФТ р╕кр╕┤р╕Чр╕Шр╕┤р╣Мр╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕г: Admin*
- `GET /stats/dashboard`: р╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕ар╕▓р╕Юр╕гр╕зр╕б (р╕вр╕нр╕Фр╕Вр╕▓р╕в, р╕Бр╕│р╣Др╕г, р╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Вр╕▓р╕вр╕Фр╕╡, р╕Бр╕гр╕▓р╕Яр╕кр╕Цр╕┤р╕Хр╕┤)

---

## 11. News & Marketing (`/news`)
- `GET /news`: р╕гр╕▓р╕вр╕Бр╕▓р╕гр╕Вр╣Ир╕▓р╕зр╕кр╕▓р╕гр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф (р╕гр╕нр╕Зр╕гр╕▒р╕Ъ Query: `shopId`)
- `GET /news/published`: р╣Ар╕Йр╕Юр╕▓р╕░р╕Вр╣Ир╕▓р╕зр╕Чр╕╡р╣Ир╣Ар╕Ьр╕вр╣Бр╕Юр╕гр╣Ир╣Бр╕ер╣Йр╕з (р╕кр╕│р╕лр╕гр╕▒р╕Ър╕ер╕╣р╕Бр╕Др╣Йр╕▓)
- `GET /news/:id`: р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕Вр╣Ир╕▓р╕зр╕гр╕▓р╕вр╕Кр╕┤р╣Йр╕Щ
- `POST /news`: р╣Ар╕Юр╕┤р╣Ир╕бр╕Вр╣Ир╕▓р╕зр╣Гр╕лр╕бр╣И *ЁЯФТ (Admin)*
    - Body: `{ title, content, imageUrl?, isPublished? }`
- `PUT /news/:id`: р╣Бр╕Бр╣Йр╣Др╕Вр╕Вр╣Ир╕▓р╕з *ЁЯФТ (Admin)*
    - Body: `{ title?, content?, imageUrl?, isPublished? }`
- `DELETE /news/:id`: р╕ер╕Ър╕Вр╣Ир╕▓р╕з *ЁЯФТ (Admin)*

---

## 12. Image Uploads (р╕Ьр╣Ир╕▓р╕Щ Supabase Storage)
р╕гр╕░р╕Ър╕Ър╣Гр╕Кр╣Йр╕Бр╕▓р╕гр╕нр╕▒р╕Ыр╣Вр╕лр╕ер╕Фр╕гр╕╣р╕Ыр╕ар╕▓р╕Юр╣Др╕Ыр╕вр╕▒р╕З Supabase Storage р╣Вр╕Фр╕вр╕Хр╕гр╕Зр╕Ьр╣Ир╕▓р╕Щ Client р╕лр╕гр╕╖р╕нр╕Ьр╣Ир╕▓р╕Щ Helper Function р╣Гр╕Щ Frontend

**Bucket**: `images`
**р╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣Мр╕Чр╕╡р╣Ир╣Бр╕Щр╕░р╕Щр╕│**:
- `products/`: р╕кр╕│р╕лр╕гр╕▒р╕Ър╕гр╕╣р╕Ыр╕ар╕▓р╕Юр╕кр╕┤р╕Щр╕Др╣Йр╕▓
- `news/`: р╕кр╕│р╕лр╕гр╕▒р╕Ър╕гр╕╣р╕Ыр╕ар╕▓р╕Юр╕Вр╣Ир╕▓р╕зр╕кр╕▓р╕г
- `rewards/`: р╕кр╕│р╕лр╕гр╕▒р╕Ър╕гр╕╣р╕Ыр╕ар╕▓р╕Юр╕Вр╕нр╕Зр╕гр╕▓р╕Зр╕зр╕▒р╕е

---

### р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Щр╕▒р╕Бр╕Юр╕▒р╕Тр╕Щр╕▓
- р╕кр╕│р╕лр╕гр╕▒р╕Ъ Method **POST, PUT, DELETE** р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╣Ир╕зр╕Щр╣Гр╕лр╕Нр╣Ир╕Хр╣Йр╕нр╕Зр╕кр╣Ир╕Зр╣Ар╕Ыр╣Зр╕Щ `JSON Body`
- р╕кр╕┤р╕Чр╕Шр╕┤р╣М **Admin** р╕лр╕бр╕▓р╕вр╕Цр╕╢р╕Зр╕Хр╣Йр╕нр╕Зр╣Ар╕Вр╣Йр╕▓р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╕Фр╣Йр╕зр╕в User р╕Чр╕╡р╣Ир╕бр╕╡ `role: 'admin'` р╣Гр╕Щр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е
- р╕гр╕░р╕Ър╕Ър╕гр╕нр╕Зр╕гр╕▒р╕Ър╕Бр╕▓р╕г Pagination р╕Ьр╣Ир╕▓р╕Щ Query Parameters `page` р╣Бр╕ер╕░ `limit` р╣Гр╕Щ Endpoint р╕лр╕ер╕▒р╕Бр╣Ж
